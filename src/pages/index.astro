---
import Layout from '../layouts/Layout.astro';
import '../styles/global.css';
import { getBlogPosts } from '../lib/contentful';

let blogPosts: any[] = [];
try {
  const allPosts = await getBlogPosts();
  blogPosts = allPosts.slice(0, 3);
} catch (e) {
  // Contentful not configured yet — show empty blog section
}
---

<Layout title="Jeff Hoeber — Data Scientist" description="Data Scientist focused on turning data into impactful product and business decisions. Explore my experience, skills, and blog.">
  <nav class="nav">
    <div class="nav-inner">
      <a href="/" class="logo">jh</a>
      <div class="nav-links">
        <a href="#about" onclick="gtag('event', 'nav_click', {link: 'about'})">About</a>
        <a href="#experience" onclick="gtag('event', 'nav_click', {link: 'experience'})">Experience</a>
        <a href="#blog" onclick="gtag('event', 'nav_click', {link: 'blog'})">Blog</a>
        <a href="#contact" onclick="gtag('event', 'nav_click', {link: 'contact'})">Contact</a>
        <div class="nav-social">
          <a href="https://linkedin.com/in/jhoeber" target="_blank" rel="noopener noreferrer" aria-label="LinkedIn" class="social-link" onclick="gtag('event', 'social_click', {platform: 'linkedin'})">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z"/><rect x="2" y="9" width="4" height="12"/><circle cx="4" cy="4" r="2"/></svg>
          </a>
          <a href="https://github.com/jhoeber" target="_blank" rel="noopener noreferrer" aria-label="GitHub" class="social-link" onclick="gtag('event', 'social_click', {platform: 'github'})">
            <svg xmlns="http://www.w3.org/2000/svg" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 19c-5 1.5-5-2.5-7-3m14 6v-3.87a3.37 3.37 0 0 0-.94-2.61c3.14-.35 6.44-1.54 6.44-7A5.44 5.44 0 0 0 20 4.77 5.07 5.07 0 0 0 19.91 1S18.73.65 16 2.48a13.38 13.38 0 0 0-7 0C6.27.65 5.09 1 5.09 1A5.07 5.07 0 0 0 5 4.77a5.44 5.44 0 0 0-1.5 3.78c0 5.42 3.3 6.61 6.44 7A3.37 3.37 0 0 0 9 18.13V22"/></svg>
          </a>
        </div>
        <button class="theme-toggle" id="theme-toggle" aria-label="Toggle theme"></button>
      </div>
    </div>
  </nav>

  <main>
    <!-- Hero -->
    <section class="hero fade-in">
      <p class="hero-greeting">Hi, I'm</p>
      <h1 class="hero-name">Jeff Hoeber</h1>
      <p class="hero-tagline">Data Scientist. Turning data into decisions.</p>
      <a href="#about" class="btn" onclick="gtag('event', 'cta_click', {button: 'about_me'})">About Me</a>
    </section>

    <!-- About -->
    <section id="about" class="section fade-in">
      <h2 class="section-title">About</h2>
      <div class="about-content">
        <p>
          I'm a Data Scientist focused on turning data into impactful
          product and business decisions.
        </p>
        <p>
          I partner closely with product and business teams to design,
          test, and ship features grounded in data-driven insights. My
          work sits at the intersection of rigorous analysis and pragmatic
          decision-making - combining statistical depth with a strong bias
          toward action.
        </p>
        <p>
          Before transitioning into Data Science, I began my career in
          audit, where I developed a deep appreciation for quality,
          precision, and attention to detail. While audit sharpened my
          ability to identify risks and uncover issues, I realized I
          wanted to use data not only to surface problems, but to drive
          solutions and create measurable impact.
        </p>
        <p>
          Today, I apply that same analytical rigor with a
          solutions-oriented mindset - helping teams move from insight to
          execution.
        </p>
        <p>
          I hope you enjoy exploring my site and learning more about my
          journey. If I can be of help, feel free to connect with me
          through the contact section.
        </p>
      </div>
    </section>

    <!-- Experience -->
    <section id="experience" class="section fade-in">
      <h2 class="section-title">Experience</h2>
      <div class="experience-list">
        <div class="experience-card">
          <div class="experience-header">
            <h3>Spotify</h3>
            <span class="experience-date">2021 — Present</span>
          </div>
          <p class="experience-location">New York, NY</p>
          <div class="experience-roles">
            <p class="experience-role">Senior Data Scientist <span class="role-date">2025 — Present</span></p>
            <p class="experience-role">Data Scientist <span class="role-date">2021 — 2025</span></p>
          </div>
        </div>

        <div class="experience-card">
          <div class="experience-header">
            <h3>Vroom</h3>
            <span class="experience-date">2020 — 2021</span>
          </div>
          <p class="experience-location">New York, NY</p>
          <div class="experience-roles">
            <p class="experience-role">Manager, Analytics & Strategy</p>
          </div>
        </div>

        <div class="experience-card">
          <div class="experience-header">
            <h3>1stdibs.com</h3>
            <span class="experience-date">2018 — 2020</span>
          </div>
          <p class="experience-location">New York, NY</p>
          <div class="experience-roles">
            <p class="experience-role">Manager, Analytics <span class="role-date">2019 — 2020</span></p>
            <p class="experience-role">Senior Analyst, Analytics <span class="role-date">2018 — 2019</span></p>
          </div>
        </div>

        <div class="experience-card">
          <div class="experience-header">
            <h3>PwC</h3>
            <span class="experience-date">2013 — 2018</span>
          </div>
          <p class="experience-location">New York, NY</p>
          <div class="experience-roles">
            <p class="experience-role">Senior Associate, Advanced Risk & Compliance Analytics <span class="role-date">2017 — 2018</span></p>
            <p class="experience-role">Senior Associate, Risk Assurance <span class="role-date">2015 — 2016</span></p>
            <p class="experience-role">Experienced Associate, Risk Assurance <span class="role-date">2013 — 2015</span></p>
          </div>
        </div>

        <div class="experience-card">
          <div class="experience-header">
            <h3>Grant Thornton LLP</h3>
            <span class="experience-date">2012 — 2013</span>
          </div>
          <p class="experience-location">New York, NY</p>
          <div class="experience-roles">
            <p class="experience-role">Associate, Business Advisory Services</p>
          </div>
        </div>
      </div>
    </section>

    <!-- Education -->
    <section id="education" class="section fade-in">
      <h2 class="section-title">Education</h2>
      <div class="experience-list">
        <div class="experience-card">
          <div class="experience-header">
            <h3>Northwestern University</h3>
            <span class="experience-date">2020 — 2023</span>
          </div>
          <p class="experience-role">MS, Data Science</p>
        </div>

        <div class="experience-card">
          <div class="experience-header">
            <h3>Lehigh University</h3>
            <span class="experience-date">2008 — 2012</span>
          </div>
          <p class="experience-role">BS, Computer Science & Business</p>
        </div>
      </div>
    </section>

    <!-- Skills -->
    <section id="skills" class="section fade-in">
      <h2 class="section-title">Skills & Tools</h2>
      <div class="skills-grid">
        <span class="tag">SQL</span>
        <span class="tag">Python</span>
        <span class="tag">R</span>
        <span class="tag">Tableau</span>
        <span class="tag">Looker</span>
        <span class="tag">Google Analytics</span>
        <span class="tag">GitHub</span>
        <span class="tag">Java</span>
        <span class="tag">Claude</span>
        <span class="tag">Cursor</span>
        <span class="tag">Lucidchart</span>
      </div>
    </section>

    <!-- Blog -->
    <section id="blog" class="section fade-in">
      <h2 class="section-title">Blog</h2>
      {blogPosts.length > 0 ? (
        <div class="blog-grid">
          {blogPosts.map((post) => (
            <a href={`/blog/${post.slug}`} class="blog-card">
              <span class="blog-date">{new Date(post.date).toLocaleDateString('en-US', { year: 'numeric', month: 'short', day: 'numeric' })}</span>
              <h3>{post.title}</h3>
              <p>{post.excerpt}</p>
            </a>
          ))}
        </div>
        <a href="/blog" class="btn blog-view-all">View All Posts</a>
      ) : (
        <p class="contact-text">Blog posts coming soon. Check back later!</p>
      )}
    </section>

    <!-- Contact -->
    <section id="contact" class="section fade-in">
      <h2 class="section-title">Contact</h2>
      <p class="contact-text">
        Want to work together or just say hi? Drop me a message.
      </p>
      <form action="https://formspree.io/f/xjgeaeev" method="POST" class="contact-form" onsubmit="gtag('event', 'form_submit', {form: 'contact'})">
        <input type="text" name="name" placeholder="Your name" required />
        <input type="email" name="email" placeholder="Your email" required />
        <textarea name="message" placeholder="Your message" rows="5" required></textarea>
        <button type="submit" class="btn">Send Message</button>
      </form>
    </section>
  </main>

  <footer class="footer">
    <p>&copy; 2026 Jeff Hoeber. Built with Astro.</p>
  </footer>
  <script is:inline>
    // Fade-in on scroll
    const observer = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          entry.target.classList.add('visible');
          observer.unobserve(entry.target);
        }
      });
    }, { threshold: 0.1 });

    document.querySelectorAll('.fade-in').forEach((el) => observer.observe(el));

    // Theme toggle
    const toggle = document.getElementById('theme-toggle');
    const html = document.documentElement;

    function setTheme(theme) {
      html.setAttribute('data-theme', theme);
      localStorage.setItem('theme', theme);
      toggle.textContent = theme === 'light' ? '\u263E' : '\u2600';
    }

    toggle.addEventListener('click', () => {
      const current = html.getAttribute('data-theme') || 'dark';
      const newTheme = current === 'dark' ? 'light' : 'dark';
      setTheme(newTheme);
      gtag('event', 'theme_toggle', {theme: newTheme});
    });

    // Set initial icon (theme is already applied by Layout)
    const theme = html.getAttribute('data-theme') || 'dark';
    toggle.textContent = theme === 'light' ? '\u263E' : '\u2600';

    // Active nav highlighting
    const navLinks = document.querySelectorAll('.nav-links a[href^="#"]');
    const sections = document.querySelectorAll('section[id]');

    const navObserver = new IntersectionObserver((entries) => {
      entries.forEach((entry) => {
        if (entry.isIntersecting) {
          navLinks.forEach((link) => link.classList.remove('active'));
          const activeLink = document.querySelector('.nav-links a[href="#' + entry.target.id + '"]');
          if (activeLink) activeLink.classList.add('active');
        }
      });
    }, { rootMargin: '-40% 0px -60% 0px' });

    sections.forEach((section) => navObserver.observe(section));
  </script>
</Layout>